# This file was autogenerated by github.com/codeready-toolchain/api/olm-catalog.sh'
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: cm-toolchain-member-operator
  namespace: openshift-marketplace
data:
  customResourceDefinitions: |-
    - apiVersion: apiextensions.k8s.io/v1beta1
      kind: CustomResourceDefinition
      metadata:
        annotations:
          controller-gen.kubebuilder.io/version: (devel)
        creationTimestamp: null
        name: nstemplatesets.toolchain.dev.openshift.com
      spec:
        additionalPrinterColumns:
        - JSONPath: .spec.tierName
          name: Tier Name
          type: string
        - JSONPath: .status.conditions[?(@.type=="Ready")].status
          name: Ready
          type: string
        - JSONPath: .status.conditions[?(@.type=="Ready")].reason
          name: Reason
          type: string
        group: toolchain.dev.openshift.com
        names:
          kind: NSTemplateSet
          listKind: NSTemplateSetList
          plural: nstemplatesets
          singular: nstemplateset
        scope: Namespaced
        subresources:
          status: {}
        validation:
          openAPIV3Schema:
            description: NSTemplateSet defines user environment via templates that are used
              for namespace provisioning
            properties:
              apiVersion:
                description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                type: string
              kind:
                description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                type: string
              metadata:
                type: object
              spec:
                description: NSTemplateSetSpec defines the desired state of NSTemplateSet
                properties:
                  clusterResources:
                    description: the cluster resources template (for cluster-wide quotas,
                      etc.)
                    properties:
                      revision:
                        description: The revision of the corresponding template
                        type: string
                      template:
                        description: Template contains an OpenShift Template to be used
                          for provisioning of cluster-scoped resources
                        type: string
                      templateRef:
                        description: TemplateRef The name of the TierTemplate resource which
                          exists in the host cluster and which contains the template to
                          use
                        type: string
                    required:
                    - revision
                    type: object
                  namespaces:
                    description: The namespace templates
                    items:
                      description: NSTemplateSetNamespace the namespace definition in an
                        NSTemplateSet resource
                      properties:
                        revision:
                          description: The revision of the corresponding template
                          type: string
                        template:
                          description: Optional field. Used to specify a custom template
                          type: string
                        templateRef:
                          description: TemplateRef The name of the TierTemplate resource
                            which exists in the host cluster and which contains the template
                            to use
                          type: string
                        type:
                          description: 'The type of the namespace. For example: ide|cicd|stage|default'
                          type: string
                      required:
                      - revision
                      - type
                      type: object
                    type: array
                  tierName:
                    description: The name of the tier represented by this template set
                    type: string
                required:
                - namespaces
                - tierName
                type: object
              status:
                description: NSTemplateSetStatus defines the observed state of NSTemplateSet
                properties:
                  conditions:
                    description: 'Conditions is an array of current NSTemplateSet conditions
                      Supported condition types: ConditionReady'
                    items:
                      properties:
                        lastTransitionTime:
                          description: Last time the condition transit from one status to
                            another.
                          format: date-time
                          type: string
                        message:
                          description: Human readable message indicating details about last
                            transition.
                          type: string
                        reason:
                          description: (brief) reason for the condition's last transition.
                          type: string
                        status:
                          description: Status of the condition, one of True, False, Unknown.
                          type: string
                        type:
                          description: Type of condition
                          type: string
                      required:
                      - status
                      - type
                      type: object
                    type: array
                type: object
            x-kubernetes-preserve-unknown-fields: true
        version: v1alpha1
        versions:
        - name: v1alpha1
          served: true
          storage: true
      status:
        acceptedNames:
          kind: ""
          plural: ""
        conditions: []
        storedVersions: []
    - apiVersion: apiextensions.k8s.io/v1beta1
      kind: CustomResourceDefinition
      metadata:
        annotations:
          controller-gen.kubebuilder.io/version: (devel)
        creationTimestamp: null
        name: useraccounts.toolchain.dev.openshift.com
      spec:
        additionalPrinterColumns:
        - JSONPath: .spec.userID
          name: User ID
          priority: 1
          type: string
        - JSONPath: .spec.nsLimit
          name: NS Limit
          type: string
        - JSONPath: .spec.nsTemplateSet.tierName
          name: Tier Name
          type: string
        - JSONPath: .status.conditions[?(@.type=="Ready")].status
          name: Ready
          type: string
        - JSONPath: .status.conditions[?(@.type=="Ready")].reason
          name: Reason
          type: string
        - JSONPath: .spec.disabled
          name: Disabled
          priority: 1
          type: boolean
        group: toolchain.dev.openshift.com
        names:
          kind: UserAccount
          listKind: UserAccountList
          plural: useraccounts
          singular: useraccount
        scope: Namespaced
        subresources:
          status: {}
        validation:
          openAPIV3Schema:
            description: UserAccount keeps all information about user provisioned in the
              cluster
            properties:
              apiVersion:
                description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                type: string
              kind:
                description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                type: string
              metadata:
                type: object
              spec:
                description: UserAccountSpec defines the desired state of UserAccount
                properties:
                  disabled:
                    description: If set to true then the corresponding user should not be
                      able to login "false" is assumed by default
                    type: boolean
                  nsLimit:
                    description: The namespace limit name
                    type: string
                  nsTemplateSet:
                    description: Namespace template set
                    properties:
                      clusterResources:
                        description: the cluster resources template (for cluster-wide quotas,
                          etc.)
                        properties:
                          revision:
                            description: The revision of the corresponding template
                            type: string
                          template:
                            description: Template contains an OpenShift Template to be used
                              for provisioning of cluster-scoped resources
                            type: string
                          templateRef:
                            description: TemplateRef The name of the TierTemplate resource
                              which exists in the host cluster and which contains the template
                              to use
                            type: string
                        required:
                        - revision
                        type: object
                      namespaces:
                        description: The namespace templates
                        items:
                          description: NSTemplateSetNamespace the namespace definition in
                            an NSTemplateSet resource
                          properties:
                            revision:
                              description: The revision of the corresponding template
                              type: string
                            template:
                              description: Optional field. Used to specify a custom template
                              type: string
                            templateRef:
                              description: TemplateRef The name of the TierTemplate resource
                                which exists in the host cluster and which contains the
                                template to use
                              type: string
                            type:
                              description: 'The type of the namespace. For example: ide|cicd|stage|default'
                              type: string
                          required:
                          - revision
                          - type
                          type: object
                        type: array
                      tierName:
                        description: The name of the tier represented by this template set
                        type: string
                    required:
                    - namespaces
                    - tierName
                    type: object
                  userID:
                    description: UserID is the user ID from RHD Identity Provider token
                      (“sub” claim) Is to be used to create Identity and UserIdentityMapping
                      resources
                    type: string
                required:
                - nsLimit
                - nsTemplateSet
                - userID
                type: object
              status:
                description: UserAccountStatus defines the observed state of UserAccount
                properties:
                  conditions:
                    description: 'Conditions is an array of current User Account conditions
                      Supported condition types: ConditionReady'
                    items:
                      properties:
                        lastTransitionTime:
                          description: Last time the condition transit from one status to
                            another.
                          format: date-time
                          type: string
                        message:
                          description: Human readable message indicating details about last
                            transition.
                          type: string
                        reason:
                          description: (brief) reason for the condition's last transition.
                          type: string
                        status:
                          description: Status of the condition, one of True, False, Unknown.
                          type: string
                        type:
                          description: Type of condition
                          type: string
                      required:
                      - status
                      - type
                      type: object
                    type: array
                type: object
            x-kubernetes-preserve-unknown-fields: true
        version: v1alpha1
        versions:
        - name: v1alpha1
          served: true
          storage: true
      status:
        acceptedNames:
          kind: ""
          plural: ""
        conditions: []
        storedVersions: []
  clusterServiceVersions: |-
    - apiVersion: operators.coreos.com/v1alpha1
      kind: ClusterServiceVersion
      metadata:
        annotations:
          alm-examples: |-
            [
              {
                "apiVersion": "toolchain.dev.openshift.com/v1alpha1",
                "kind": "NSTemplateSet",
                "metadata": {
                  "labels": {
                    "username": "johnsmith"
                  },
                  "name": "johnsmith"
                },
                "spec": {
                  "namespaces": [
                    {
                      "revision": "ab12ef",
                      "type": "ide"
                    },
                    {
                      "revision": "34efcd",
                      "type": "cicd"
                    },
                    {
                      "revision": "cdef56",
                      "type": "stage"
                    }
                  ],
                  "tierName": "basic"
                }
              },
              {
                "apiVersion": "toolchain.dev.openshift.com/v1alpha1",
                "kind": "UserAccount",
                "metadata": {
                  "name": "johnsmith",
                  "namespace": "toolchain-member-operator"
                },
                "spec": {
                  "nsLimit": "admin",
                  "nsTemplateSet": {
                    "namespaces": [
                      {
                        "revision": "34efcd",
                        "type": "dev"
                      },
                      {
                        "revision": "ab12ef",
                        "type": "code"
                      },
                      {
                        "revision": "cdef56",
                        "type": "stage"
                      }
                    ],
                    "tierName": "basic"
                  },
                  "userID": "1a03ecac-7c0b-44fc-b66d-12dd7fb21c40"
                }
              }
            ]
          capabilities: Basic Install
        name: toolchain-member-operator.v0.0.1
        namespace: placeholder
      spec:
        apiservicedefinitions: {}
        customresourcedefinitions:
          owned:
          - description: NSTemplateSet defines user environment via templates that are used
              for namespace provisioning
            displayName: Namespace Template Set
            kind: NSTemplateSet
            name: nstemplatesets.toolchain.dev.openshift.com
            version: v1alpha1
          - description: UserAccount keeps all information about user provisioned in the
              cluster
            displayName: User Account
            kind: UserAccount
            name: useraccounts.toolchain.dev.openshift.com
            version: v1alpha1
        description: Placeholder description
        displayName: Toolchain Member Operator
        icon:
        - base64data: ""
          mediatype: ""
        install:
          spec:
            clusterPermissions:
            - rules:
              - apiGroups:
                - monitoring.coreos.com
                resources:
                - servicemonitors
                verbs:
                - get
                - create
              - apiGroups:
                - ""
                resources:
                - nodes
                verbs:
                - list
              - apiGroups:
                - ""
                resources:
                - namespaces
                - limitranges
                verbs:
                - get
                - create
                - update
                - list
                - watch
                - delete
              - apiGroups:
                - user.openshift.io
                resources:
                - identities
                - users
                - useridentitymappings
                - groups
                verbs:
                - '*'
              - apiGroups:
                - core.kubefed.io
                resources:
                - kubefedclusters
                verbs:
                - '*'
              - apiGroups:
                - toolchain.dev.openshift.com
                resources:
                - '*'
                verbs:
                - '*'
              - apiGroups:
                - rbac.authorization.k8s.io
                - authorization.openshift.io
                resources:
                - rolebindings
                - roles
                - clusterroles
                verbs:
                - '*'
              - apiGroups:
                - apiextensions.k8s.io
                resources:
                - customresourcedefinitions
                verbs:
                - get
                - create
              - apiGroups:
                - route.openshift.io
                resources:
                - routes
                verbs:
                - get
                - list
              - apiGroups:
                - networking.k8s.io
                resources:
                - networkpolicies
                verbs:
                - '*'
              - apiGroups:
                - quota.openshift.io
                resources:
                - clusterresourcequotas
                verbs:
                - '*'
              serviceAccountName: member-operator
            deployments:
            - name: member-operator
              spec:
                replicas: 1
                selector:
                  matchLabels:
                    name: member-operator
                strategy: {}
                template:
                  metadata:
                    labels:
                      name: member-operator
                  spec:
                    containers:
                    - command:
                      - member-operator
                      env:
                      - name: WATCH_NAMESPACE
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.annotations['olm.targetNamespaces']
                      - name: POD_NAME
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.name
                      - name: OPERATOR_NAME
                        value: member-operator
                      image: REPLACE_IMAGE
                      imagePullPolicy: IfNotPresent
                      name: member-operator
                      resources: {}
                    serviceAccountName: member-operator
            permissions:
            - rules:
              - apiGroups:
                - ""
                resources:
                - pods
                - services
                - endpoints
                - persistentvolumeclaims
                - events
                - configmaps
                - secrets
                - serviceaccounts
                verbs:
                - '*'
              - apiGroups:
                - apps
                resources:
                - deployments
                - daemonsets
                - replicasets
                - statefulsets
                verbs:
                - '*'
              - apiGroups:
                - apps
                resourceNames:
                - member-operator
                resources:
                - deployments/finalizers
                verbs:
                - update
              - apiGroups:
                - core.kubefed.io
                resources:
                - kubefedclusters/status
                verbs:
                - update
              serviceAccountName: member-operator
          strategy: deployment
        installModes:
        - supported: true
          type: OwnNamespace
        - supported: true
          type: SingleNamespace
        - supported: false
          type: MultiNamespace
        - supported: true
          type: AllNamespaces
        keywords:
        - ""
        maintainers:
        - {}
        maturity: alpha
        provider: {}
        version: 0.0.1
  packages: |
    - channels:
      - currentCSV: toolchain-member-operator.v0.0.1
        name: alpha
      defaultChannel: alpha
      packageName: toolchain-member-operator
---
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: source-toolchain-member-operator
  namespace: openshift-marketplace
spec:
  configMap: cm-toolchain-member-operator
  displayName: Toolchain Member Operator
  publisher: Red Hat
  sourceType: internal
